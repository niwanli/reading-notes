# Book 1：移动通信核心网

> 庞邵敏，李亚波. 移动通信核心网. 北京：电子工艺出版社，2016.

# 第一章 5G网络架构

随着4G技术的成熟和广泛商用，5G将在大幅提升“以人为中心”的移动互联网业务体验的同时，全面支持“以物为中心”的物联网业务，并最终实现人与人、人与物以及物与物的“万物互联”总体愿景。

5G网络将遵循网络业务融合和按需提供服务的核心理念，引入更丰富的无线接入网拓扑，提供更灵活的无线控制、业务感知和协议栈定制能力；重构网络控制和转发机制，改变单一管道和固化的服务模式；利用友好开放的信息基础设施环境，为不同用户和垂直行业提供高度可定制化的网络服务，构建资源全共享、功能易编排、业务紧耦合的综合信息化服务使能平台。

## 5G技术场景

面向2020年及未来，移动互联网和物联网业务将成为移动通信发展的主要驱动力。5G将解决多样化应用场景下差异化性能指标带来的挑战。从移动互联网和物联网主要应用场景、业务需求及挑战出发，可以归纳出以下4个5G技术的主要应用场景：

* 连续广域覆盖
* 热点高容量
* 低功耗大连接
* 低时延高可靠

其中，连续广域覆盖和热点高容量场景主要满足2020年及未来的移动互联网业务需求，也是传统的4G主要技术场景。低功耗大连接和低时延高可靠场景主要面向物联网业务，也是5G新拓展的场景，重点解决传统移动通信无法很好地支持物联网及垂直行业应用问题。

## 5G技术创新

5G及数创新主要来源于**无线技术**和**网络技术**两方面。在无线技术领域，大规模天线、超密集组网、新型多址和全频谱接入等技术已成为业界关注的焦点；在网络技术领域，基于软件定义网络（SDN）和网络功能虚拟化（NFV）的新型网络架构已取得广泛共识。

在**连续广域覆盖**场景，受限于站址和频谱资源，为了满足100Mbps用户体验速率需求，除了需要尽可能多的低频段资源外，还要大幅提升系统频谱效率。大规模天线阵列是其中最主要的关键技术之一，新型多址技术可与大规模天线阵列相结合，进一步提升系统频谱效率和多用户接入能力。在网络架构方面，综合多种无线接入能力以及集中的网络资源协同与QoS控制技术，为用户提供稳定的体验速率保证。

在**热点高容量**场景，极高的用户体验速率和极高的流量密度是该场景面临的主要挑战，超密集组网能够更有效地服用频率资源，极大提升单位面积内的频率服用效率；全频谱接入能够充分利用低频和高频的频率资源，实现更高的传输速率；大规模天线、新型多址等技术与前两种技术相结合，可实现频谱效率的进一步提升。

在**低功耗大连接**场景，海量的设备连接、超低的终端功耗与成本是该场景面临的主要挑战。新型多址技术通过多用户信息的叠加传输可成倍提升系统的设备连接能力，还可通过免调度传输有效降低信令开销和终端功耗；F-OFDM和FBMC等新型多载波技术在灵活使用碎片频谱、支持窄带和小数据包、降低功耗与成本方面具有显著优势；此外，终端直接通信（D2D)可避免基站与终端间的长距离传输，可实现功耗的有效降低。

在**低时延高可靠**场景，应尽可能降低空口传输时延、网络转发时延及重传概率，以满足极高的时延和可靠性要求。为此，需采用更短的帧结构和更优化的信令流程，引入支持免调度的新型多址和D2D等技术以减少信令交互和数据中转，并运用更先进的调制编码和重传机制以提升传输可靠性。此外，在网络架构方面，控制云通过优化数据传输路径，控制业务数据靠近转发云和接入云边缘，可有效降低网络传输时延。

## 5G网络架构

未来的5G网络将是基于SDN、NFV和云计算技术的更加灵活、智能、高效和开放的网络系统。5G网络逻辑架构包括：接入云、控制云和转发云。5G的网络控制功能和数据转发功能将解耦，形成集中统一的控制云和高效的转发云，基于“三朵云”的新型5G网络架构将是移动网络未来的发展方向。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/5G_architecture.png "")

图-1 5G网络逻辑视图

**接入云**支持多种无线制式的接入，融合集中式和分布式两种无线接入网架构，适应各种类型的回传链路，实现更灵活的组网部署和更高效的无线资源管理。接入平面包括各种类型的基站和无线接入设备。基站间交互能力增强，组网拓扑形式丰富，能够实现快速灵活的无线接入协同控制和更高的无线资源利用率。

**控制云**实现局部和全局的会话控制、移动性管理和服务质量保证，构建面向业务的网络能力开放接口，从而满足业务的差异化需求，提升业务的部署效率。控制平面为传统空口（LTE、WiFi等）和5G新空口提供统一的网络接口。控制面功能分解成细粒度的网络功能组件，通过按需编排的网络功能，按照业务场景特性定制专用的网络服务，并在此基础上实现精细化网络资源管控和能力开放。

**转发云**基于通用的硬件平台，在控制云高效的网络控制和资源调度下，实现海量业务数据流的高可靠、低时延、均负载的高效传输。转发平面包含用户面下沉的分布式网关，集成边缘内容缓存和业务流加速等功能，在集中的控制平面的统一控制下，完成业务数据流转发和边缘处理。

## 小结

* 4种主要应用场景：连续广域覆盖、热点高容量、低功耗大连接、低时延高可靠
* 无线技术领域的创新：大规模天线、超密集组网、新型多址、全频谱接入
* 网络技术领域的创新：软件定义网络（SDN）、网络功能虚拟化（NFV）
* 5G网络逻辑架构包括：接入云、控制云和转发云

# 第二章 NFV/SDN概述

5G网络将改变传统基于专用硬件的刚性基础设施平台，引入互联网中云计算、虚拟化和软件定义网络等技术理念，构建跨功能平面统一资源管理架构和多业务承载资源平面，全面解决传输服务质量、资源可扩展性、组网灵活性等基础性问题。

**网络功能虚拟化**（NFV）实现对底层资源的统一“池化管理”，向上提供相互隔离的有资源保证的多租户网络环境，是网络资源管理的核心技术。引入这一技术理念，底层基础设施能为上层租户提供一个充分自控的虚拟专用网络环境，允许用户自定义编址、自定义拓扑、自定义转发以及自定义协议，彻底打开基础网络能力。

**软件定义网络**（SDN）是一种将控制平面和数据平面相分离的网络架构。在控制平面，通过对网络、计算和存储资源的统一软件编排和动态调配，在电信网中实现网络资源与编程能力的衔接；在数据平面，通过对网络转发行为的抽象，实现利用高级语言对多种转发平台的灵活转发协议和转发流程定制，实现向上层应用和性能要求的资源优化配置。

## NFV简介

NFV（Network Function Virtualization，网络功能虚拟化）通过使用通用性硬件以及虚拟化技术来承载很多功能的软件处理，从而降低网络昂贵的设备成本。可以通过软硬件解耦及功能抽象，使网络设备功能不再依赖于专用硬件，资源可以充分灵活共享，实现新业务的快速开发和部署，并基于实际业务需求进行自动部署、弹性伸缩、故障隔离和自愈等。

NFV端到端虚拟化架构中，从功能上来划分，可以分为3种类型的模块：

* MANO（Management and Orchestration，管理与编排相关模块）
* VNF（Virtualised Network Function，虚拟化的网络实体）
* NFVI（Network Functions Virtualization Infrastructure，网络功能虚拟化基础设施层）

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/NFV.png "")

图-2 NFV端到端虚拟化架构

### 1.MANO管理与协同编排模块

虚拟化实现了底层物理设备与上层操作系统和应用软件的解耦，而管理与协同则要提供一个可管、可控、可运营的服务提供环境，使得基础资源可以便捷地提供给应用，其本质是实现部署、调度、运维、管理。虚拟化架构按照网络、网元、资源划分为3层，每层均存在管理和协同功能模块。管理与协同层的功能应包括虚拟机生命周期管理、资源监控、虚拟机性能监控、故障管理、虚拟机动态迁移、负载均衡、资源管理、信息维护等。

管理与协同层主要包括：

* OSS（Operation Support System，运营支撑系统）
* EMS（Element Management System，网元管理系统）
* NFVO（Network Function Virtual Orchestrator，网络功能虚拟化编排器）
* VNFM（Virtual Network Function Management，虚拟化网络功能管理器）
* VIM（Virtual Infrastructure Management，虚拟化基础设施管理器）

其中，NFVO实现统一的资源管理与调度；VNFM实现虚拟化网元生命周期管理，包括虚拟网元的生成、变更、删除等；VIM实现实现对虚拟化资源、硬件资源池的统一管理。

### 2.VNF虚拟化的网络实体

对于移动网络来说，网元层的VNF是软化后的网元，部署在VM上，执行3GPP定义的网元功能，功能与接口和非虚拟化时保持一致。网元层的主要功能模块包括：

* OMU（Operation and Management Unit，操作与管理单元）
* VNSF(Virtual Network Sub-functions，虚拟化网络子帧）

### 3.NFVI网络功能虚拟化基础设施层

NFVI主要包括**物理硬件层**和**虚拟化层**。物理硬件层包括计算、存储、网络三部分的设备。虚拟化层主要是指虚拟机超级管理员（Hypervisor），Hypervisor是每个服务器上的虚拟计算、虚拟存储和虚拟网络能力的直接提供者。

## SDN简介

SDN（Software Defined Network，软件定义网络）是一种新兴的控制与转发相分离并直接可编程的网络架构，其核心思想是将传统网络设备紧耦合的网络架构解耦成应用、控制、转发三层分离架构。SDN通过标准化实现网络的集中管控和网络应用的可编程，从而实现了网络流量的灵活控制，为核心网络及应用的创新提供了良好的平台。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/SDN.png "")

图-3 SDN技术架构

* **数据层**由只具有数据转发功能的设备组成，负责数据的转发、设备信息的上报等。
* **控制层**又称为网络操作系统层，是SDN架构中的大脑，其抽取了原网络设备中的控制功能，负责制定流转发规则、状态信息收集、网络配置等控制功能。
* **应用层**通过调用控制层开放的API接口，编程实现各种网络功能，如网络监控、防火墙、流量过滤等。SDN的本质是逻辑集中控制层的可编程化。

在这一架构下，开放和标准化是核心关键点，表现如下所述：

* 标准化数据面与控制面的接口（又称南向接口）：屏蔽网络基础设施资源在类型、支持的协议等方面的异构性，使得数据面的网络资源设施能够无障碍地接收控制面的指令，承载网络中的数据转发业务。
* 标准化控制层和应用层的接口（又称北向接口）：为上层应用提供统一的管理视图和编程接口，使得用户可以通过软件从逻辑上定义网络控制和网络服务。

基于OpenFlow的SDN技术带给企业和用户更加灵活的网络管控、更高效的资源利用率、更弹性的资源调度。OpenFlow主要定义了交换机的功能模块以及其与控制器之间的通信信道方面的接口。通过该接口，OpenFlow控制器将制定好的转发策略通过安全通信信道发送给交换机，对交换机处理流的方式进行控制。具体的控制策略是由流表和表项来表示的，每个交换机可以有一个或多个流表，每个流表又包含一系列的流表项。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/OpenFlow.png "")

图-4 OpenFlow技术架构

## NFV/SDN架构下的移动核心网

移动网络中引入NFV和SDN，实现原EPC中承担用户面功能网元（S-GW/P-GW)的控制面和转发面解耦，并且控制面由SDN Controller集中控制。另外，核心网的网元功能（可包含S-GW/P-GW的控制面功能）以软件的方式部署在虚拟机上。从而实现网络设备的控制面和转发面解耦，软件和硬件平台解耦，硬件平台资源共享，使得移动网络的功能增强和新业务能够快速、灵活部署，网络资源按需调度，流量处理能力按需部署和组合等。

移动核心网网元的控制与转发完全分离，剥离网元的控制功能由SDN Controller负责移动性管理和会话管理，转发面不再参与控制管理；软化后的MME、PGW-C、SGW-C和PCRF等网元控制功能和业务编排功能等可作为SDN控制器的应用来实现。由编排器Orchestrator根据网络与业务需求，在数据中心通过MANO管理按需申请资源，使用NFV技术生成相应的虚拟网络功能，通过SDN控制器实现网络功能转发链和业务链编排。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/NFV_and_SDN_in_5G.png "")

图-5 NFV/SDN架构下的移动核心网

## 小结

* 网络功能虚拟化（NFV）实现对底层资源的统一“池化管理”，是网络资源管理的核心技术。
* NFV端到端虚拟化架构，可以分为3种类型的模块：
	* MANO（Management and Orchestration，管理与编排相关模块）
	* VNF（Virtualised Network Function，虚拟化的网络实体）
	* NFVI（Network Functions Virtualization Infrastructure，网络功能虚拟化基础设施层）
* 软件定义网络（SDN）是一种将控制平面和数据平面相分离的网络架构。
* SDN技术架构，可以分为3个平面：数据平面、控制平面、应用平面。

# 第三章 5G组网设计

> IMT-2020(5G)推进组. 5G网络架构设计白皮书，2016.

## 5G网络平台视图

5G基础设施平台将更多的选择由基于通用硬件架构的数据中心构成支持5G网络的高性能转发要求和电信级的管理要求，并以网络切片为实例，实现移动网络的定制化部署。

引入SDN/NFV技术，5G硬件平台支持虚拟化资源的动态配置和高效调度，在广域网层面，NFV编排器可实现跨数据中心的功能部署和资源调度，SDN控制器负责不同层级数据中心之间的广域互连。城域网以下可部署单个数据中心，中心内部使用统一的NFVI基础设施层，实现软硬件解耦，利用SDN控制器实现数据中心内部的资源调度。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/5G_Network.png "")

图-6 5G网络平台视图

利用平台虚拟化技术，可以在同一基站平台上同时承载多个不同类型的无线接入方案，并能完成接入网逻辑实体的实时动态的功能迁移和资源伸缩。利用网络虚拟化技术，可以实现RAN内部各功能实体动态无缝连接，便于配置客户所需的接入网边缘业务模式。另外，针对RAN侧加速器资源配置和虚拟化平台间高速大带宽信息交互能力的特殊要求，虚拟化管理与编排技术需要进行相应的扩展。

SDN/NFV技术融合将提升5G进一步组大网的能力：NFV技术实现底层物理资源到虚拟化资源的映射，构造虚拟机（VM），加载网络逻辑功能（VNF）；虚拟化系统实现对虚拟化基础设施平台的统一管理和资源的动态重配置；SDN技术则实现虚拟机间的逻辑连接，构建承载信令和数据流的通路。最终实现接入网和核心网功能单元动态连接，配置端到端的业务链，实现灵活组网。

## 5G网络组网视图

一般来说，5G组网功能元素可分为四个层次：

* **中心级**：以控制、管理和调度职能为核心，例如虚拟化功能编排、广域数据中心互连和BOSS系统等，可按需部署于全国节点，实现网络总体的监控和维护。
* **汇聚级**：主要包括控制面网络功能，例如移动性管理、会话管理、用户数据和策略等。可按需部署于省分一级网络。
* **区域级**：主要功能包括数据面网关功能，重点承载业务数据流，可部署于地市一级。移动边缘计算功能、业务链功能和部分控制面网络功能也可以下沉到这一级。
* **接入级**：包含无线接入网的CU和DU功能，CU可部署在回传网络的接入层或者汇聚层；DU部署在用户近端。CU和DU间通过增强的低时延传输网络实现多点协作化功能，支持分离或一体化站点的灵活组网。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/5G_layers.png "")

图-7 5G网络组网视图

## 小结

* 5G网络平台视图分为3个平台：基础设施平台、网络切片平台、5G管理和编排平台。
* 5G网络组网视图分为4个层次：中心级、汇聚级、区域级、接入级。

# 第四章 5G网络关键技术

与4G时期相比，5G网络服务具备更贴近用户需求、定制化能力进一步提升、网络与业务深度融合以及服务更友好等特征，其中代表性的网络服务能力及关键技术包括：网关控制转发分离、按需定制的移动网络、按需组网和网络切片、网络能力开放、移动边缘计算、以用户为中心的无线接入网。

## 网关控制转发分离

在5G网络中，网络向**控制功能集中化**和**转发功能分布化**的趋势演进。

1. 控制和转发功能分离后，转发面将专注于业务数据的路由转发，具有简单、稳定和高性能等特性，以满足未来海量移动流量的转发需求。控制面采用逻辑集中的方式实现统一的策略控制，保证灵活的移动流量调度和连接管理。
2. 集中部署的控制面通过移动流控制接口实现对转发面的可编程控制。
3. 控制面和转发面的分离，使网络架构更加扁平化，网关设备可采用分布式的部署方式，从而有效降低了业务传输时延。
4. 控制面功能和转发面功能能够分别独立演进，从而提升网络整体系统的灵活性和效率。

## 按需定制的移动网络

5G网络的服务对象是海量丰富类型的终端和应用，其报文结构、会话类型、移动规律和安全性需求都不尽相同，网络必须针对不同应用场景的服务需求引入不同的功能设计。因此，网络控制功能按需重构是5G网络标志性服务能力之一。

1. **按需的会话管理**：按需的会话管理是指5G网络会话管理功能可以根据不同终端属性、用户类别和业务特征，灵活的配置连接类型、锚点位置和业务连续性能力等参数。
2. **按需的移动性管理**：网络侧移动性管理包括在激活态维护会话的连续性和空闲态保证用户的可达性。
3. **按需的安全功能**：5G为不同行业提供差异化业务，需要提供满足各项差异化安全要求的完整性安全性方案。
4. **控制面按需重构**：控制面重构重新定义控制面网络功能，实现网络功能模块化，降低网络功能之间交互复杂性，实现自动化的发现和连接，通过网络功能的按需配置和定制，满足业务的多样化需求。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/control_panel_rebuild.png "")

图-8 控制面按需重构的功能特征

控制面按需重构具备以下功能特征：

* 接口中立
* 融合网络数据库
* 控制面交互功能
* 网络组件集中管理

## 按需组网和网络切片

多样化的业务场景对5G网络提出了多样化的性能要求和功能要求。5G核心网应具备向业务场景适配的能力，针对每种5G业务场景提供恰到好处的网络控制功能和性能保证，实现按需组网的目标。网络切片是实现按需组网的一种实现方式。

按需组网技术具有以下优点：

* 根据业务场景需求对所需的网络功能进行定制剪裁和灵活组网，实现业务流程和数据路由的最优化
* 根据业务模型对网络资源进行动态分配和调整，提高网络资源利用率
* 隔离不同业务场景所需的网络资源，提供网络资源保障，增强整体网络健壮性和可靠性

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/network_chips.png "")

图-9 网络切片架构

网络切片是网络功能虚拟化（NFV）应用于5G阶段的关键特征。一个网络切片将构成一个端到端的逻辑网络，按切片需求方的需求灵活地提供一种或多种网络服务。网络切片架构主要包括切片管理和切片选择两项功能。

**切片管理功能**有机串联商务运营、虚拟化资源平台和网管系统，为不同切片需求方（如垂直行业用户、虚拟运营商和企业用户等）提供安全隔离、高度自控的专用逻辑网络。切片管理功能包含三个阶段：

* 商务设计阶段
* 实例编排阶段
* 运行管理阶段

**切片选择功能**实现用户终端与网络切片间的接入映射。切片选择功能综合业务签约和功能特性等多种因素，为用户终端提供合适的切片接入选择。用户终端可以分别接入不同切片，也可以同时接入多个切片。用户同时接入多切片的场景形成两种切片架构变体：

* 独立架构
* 共享架构

## 网络能力开放

网络能力开放的目的在于实现向第三方应用服务提供商提供所需的网络能力。其基础在于移动网络中各个网元所能提供的网络能力，包括用户位置信息、网元负载信息、网络状态信息和运营商组网资源等，而运营商网络需要将上述信息根据具体的需求适配，提供给第三方使用。

5G网络能力开放框架旨在实现面向第三方的网络友好化和网络管道智能化，将使应用能充分利用网络能力，实现更好的用户体验和应用创新；同时实现应用与网络的良好互动，优化网络资源配置和流量管理。其主要特性包括：

* 基于控制转发功能分离的架构原则，5G网络能力开放平台实现了对集中部署的控制面功能的统一调用
* 基于虚拟化的基础设施平台，5G网络能力开放平台优化了基础设施资源的管控和调度能力
* 基于网络边缘计算平台，5G网络能力开放平台提供第三方业务运营的管控能力

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/ability_open.png "")

图-10 5G能力开放平台

## 移动边缘计算

移动边缘计算（MEC，Mobile Edge Computing）改变了4G系统中网络与业务分离的状态，将业务平台下沉到网络边缘，为移动用户就近提供业务计算和数据缓存能力，实现网络从接入管道向信息化服务使能平台的关键跨越，是5G的代表性能力。如图8所示，MEC核心功能主要包括：

**（1）应用和内容进管道**

MEC可与网关功能联合部署，构建灵活分布的服务体系。特别针对本地化、低时延和高带宽要求的业务，如
移动办公、车联网、4K-8K视频等，提供优化的服务运行环境。

**（2）动态业务链功能**

MEC功能并不限于简单的就近缓存和业务服务器下沉，而且随着计算节点与转发节点的融合，在控制面功能的集中调度下，实现动态业务链(Service Chain)技术，灵活控制业务数据流在应用间路由，提供创新的应用网内聚合模式。

**（3）控制平面辅助功能**

MEC可以和移动性管理、会话管理等控制功能结合，进一步优化服务能力。例如，随用户移动过程实现应用
服务器的迁移和业务链路径重选；获取网络负荷、应用SLA和用户等级等参数对本地服务进行灵活的优化控制等。移动边缘计算功能部署方式非常灵活，即可以选择集中部署，与用户面设备耦合，提供增强型网关功能，也可以分布式的部署在不同位置，通过集中调度实现服务能力。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/MEC.png "")

图-11 5G网络MEC架构

## 以用户为中心的无线接入网

5G无线接入网改变了传统以基站为中心的设计思路，突出“网随人动”新要求，具体能力包括：灵活的无线控制、无线智能感知和业务优化、接入网协议定制化部署。

**（1）灵活的无线控制**

通过重新定义信令功能和控制流程实现高效灵活的空口控制和简洁健壮的链路管理机制。

**（2）无线智能感知和业务优化**

为了更充分的利用无线信道资源，可以通过引入接入网和应用服务器的双向交互，实现无线信道与业务的动态匹配。

**（3）接入网协议定制化部署**

在无线智能感知的基础上，接入网协议栈可以针对业务需求类型提供差异化的配置，即软件定义协议技术。

**软件定义协议技术**通过动态定义的适配不同业务需求的协议栈功能集合，为多样化的业务场景提供差异化服务，使得单个接入网物理节点能充分满足多种业务的接入需求。

![](https://github.com/niwanli/reading-notes/raw/master/5G/pictures/SDP.png "")

图-12 以用户为中心的无线接入网

## 小结

* 网关控制转发分离
* 按需定制的移动网络
* 按需组网和网络切片
* 网络能力开放
* 移动边缘计算
* 以用户为中心的无线接入网

